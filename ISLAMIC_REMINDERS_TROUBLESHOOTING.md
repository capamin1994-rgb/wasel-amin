# ุฏููู ุงุณุชูุดุงู ุฃุฎุทุงุก ูุธุงู ุงูุชุฐููุฑุงุช ุงูุฅุณูุงููุฉ

## ุงููุดุงูู ุงูุดุงุฆุนุฉ ูุงูุญููู

### โ ุงููุดููุฉ: ูุง ุชุตู ุงูุฑุณุงุฆู ูู ููุช ุงููุฌุฑ

#### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

1. **ุนุฏู ุฑุจุท ุฌูุณุฉ WhatsApp**
   - ุงูุญู: ุงูุชูู ุฅูู ุตูุญุฉ "ุงูุชุฐููุฑุงุช ุงูุฅุณูุงููุฉ" ูุชุฃูุฏ ูู ุฑุจุท ุฌูุณุฉ WhatsApp
   - ูุฌุจ ุฃู ุชุธูุฑ ุงูุฌูุณุฉ ูุน ุนูุงูุฉ "ูุชุตูุฉ" โ

2. **ุนุฏู ุชุญุฏูุฏ ุงููููุน ูุงูุฅุญุฏุงุซูุงุช**
   - ุงูุญู: ุฃุฏุฎู ุจูุงูุงุช ุงููููุน (ุงููุฏููุฉุ ุฎุท ุงูุนุฑุถุ ุฎุท ุงูุทูู)
   - ููููู ุงุณุชุฎุฏุงู Google Maps ููุญุตูู ุนูู ุงูุฅุญุฏุงุซูุงุช ุงูุตุญูุญุฉ
   - ูุซุงู: ูุตุฑ (ุงููุงูุฑุฉ) - 30.0444, 31.2357

3. **ุนุฏู ุชูุนูู ุตูุงุฉ ุงููุฌุฑ**
   - ุงูุญู: ุชุฃูุฏ ูู ุชูุนูู "ุตูุงุฉ ุงููุฌุฑ" ูู ูุณู "ุฅุนุฏุงุฏุงุช ุงูุตููุงุช"
   - ุงุถุจุท ููุช ุงูุชูุจูู ูุจู ุงูุฃุฐุงู (ูุซูุงู 10 ุฏูุงุฆู)

4. **ุนุฏู ุฅุถุงูุฉ ุงููุณุชูููู**
   - ุงูุญู: ุฃุถู ุฃุฑูุงู WhatsApp ุฃู ูุฌููุนุงุช ูุงุณุชูุจุงู ุงูุฑุณุงุฆู
   - ุชุฃูุฏ ูู ุชูุนูู ุงููุณุชูุจููู (enabled = Yes)

5. **ุฌูุณุฉ WhatsApp ุบูุฑ ูุชุตูุฉ**
   - ุงูุญู: ุชุญูู ูู ุงุชุตุงู ุฌูุณุฉ WhatsApp
   - ุงูุชูู ุฅูู ุตูุญุฉ "ุฌูุณุงุชู" ูุชุฃูุฏ ูู ุญุงูุฉ ุงูุงุชุตุงู
   - ูุฏ ุชุญุชุงุฌ ุฅูู ูุทุน ุงูุงุชุตุงู ูุฅุนุงุฏุฉ ุงูุฑุจุท

---

### โ ุงููุดููุฉ: ุงูุฑุณุงุฆู ุชุชุฃุฎุฑ ุฃู ูุง ุชูุฑุณู ุจุงูููุช ุงูููุงุณุจ

#### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

1. **ูุฑู ุชูููุชู ุบูุฑ ุตุญูุญ**
   - ุงูุญู: ุชุญูู ูู ุงูููุทูุฉ ุงูุฒูููุฉ (timezone)
   - ูุฌุจ ุฃู ุชููู ูุทุงุจูุฉ ูููุทูุชู ุงูุฌุบุฑุงููุฉ
   - ุงูุงูุชุฑุงุถู: Africa/Cairo

2. **ุญุณุงุจ ุฃููุงุช ุงูุตูุงุฉ ุบูุฑ ุตุญูุญ**
   - ุงูุญู: ุชุญูู ูู ุทุฑููุฉ ุญุณุงุจ ุงูุตููุงุช (Prayer Calculation Method)
   - ุงูุฎูุงุฑุงุช:
     - Egyptian (ุงูุทุฑููุฉ ุงููุตุฑูุฉ)
     - MWL (ุฑุงุจุทุฉ ุงูุนุงูู ุงูุฅุณูุงูู)
     - Makkah (ุทุฑููุฉ ููุฉ ุงูููุฑูุฉ)
     - ISNA (ุฌูุนูุฉ ุดูุงู ุฃูุฑููุง ุงูุฅุณูุงููุฉ)

3. **ุงูุฎุงุฏู ุบูุฑ ููุดุบูู ุทูู ุงูููุช**
   - ุงูุญู: ุชุฃูุฏ ูู ุฃู ุงูุฎุงุฏู ูุนูู 24/7
   - ูู ุจูุฆุฉ ุงูุฅูุชุงุฌุ ุงุณุชุฎุฏู Docker ุฃู pm2 ูุถูุงู ุชุดุบูู ูุณุชูุฑ

---

### โ ุงููุดููุฉ: ูุง ุชุตู ุฑุณุงุฆู ุงูุตูุงู

#### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

1. **ุนุฏู ุชูุนูู ุฎูุงุฑุงุช ุงูุตูุงู**
   - ุงูุญู: ุงุฐูุจ ุฅูู ุฅุนุฏุงุฏุงุช ุงูุตูุงู ููุนูู ุงูุฎูุงุฑุงุช ุงููุทููุจุฉ:
     - ุงูุงุซููู (Monday)
     - ุงูุฎููุณ (Thursday)
     - ุงูุฃูุงู ุงูุจูุถ (White Days)

2. **ุงูุชุงุฑูุฎ ุงููุฌุฑู ุบูุฑ ุตุญูุญ**
   - ุงูุญู: ุชุฃูุฏ ูู ุชุญุฏูุซ ูุธุงู ุงูุชุงุฑูุฎ ุงููุฌุฑู
   - ุชุญูู ูู ุงูููุฑ ูุงูุชุงุฑูุฎ ุงููุฌุฑู ุงูุตุญูุญ

---

### โ ุงููุดููุฉ: ุฑุณุงุฆู ุงูุฃุฐูุงุฑ ูุงูุฃุญุงุฏูุซ ูุง ุชุตู

#### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

1. **ููุชุจุฉ ุงููุญุชูู ูุงุฑุบุฉ**
   - ุงูุญู: ุชุญูู ูู ููุชุจุฉ ุงููุญุชูู ูุฃุถู ูุญุชูู (ุฃุฐูุงุฑุ ุฃุญุงุฏูุซ)
   - ุงูุฌุฏูู ุงููุทููุจ: `content_library`

2. **ุนุฏู ูุฌูุฏ ูุญุชูู ููุนูู**
   - ุงูุญู: ุชุฃูุฏ ูู ุฃู ุงููุญุชูู ููุนูู (active = 1)

---

## ๐ง ุฎุทูุงุช ุงูุชุดุฎูุต

### 1๏ธโฃ ุชุดุบูู ุฃุฏุงุฉ ุงูุชุดุฎูุต

```bash
node tools/diagnose_reminders.js
```

ูุฐุง ุณูุนุทูู ุชูุฑูุฑ ุดุงูู ุนู ุญุงูุฉ ุงููุธุงู:
- ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุฅุนุฏุงุฏุงุช ุงููุญููุธุฉ
- ุญุงูุฉ ุฌูุณุงุช WhatsApp
- ุญุณุงุจุงุช ุฃููุงุช ุงูุตููุงุช
- ุญุงูุฉ ุงููุณุชูููู

### 2๏ธโฃ ูุญุต ุงูุณุฌูุงุช

ุงุจุญุซ ุนู ุฑุณุงุฆู ุงูุฎุทุฃ ูู console/logs:

```javascript
// ุงูุฑุณุงุฆู ุงููุชููุนุฉ ุนูุฏ ูุฌุงุญ ุงูุฅุฑุณุงู:
[Prayer Reminder] Sending ุงููุฌุฑ reminder for config xxx
[Scheduler] Sending reminder to recipient ...
โ Message sent to +201234567890

// ุงูุฑุณุงุฆู ุงููุชููุนุฉ ุนูุฏ ุงููุดู:
[Prayer Reminder] Config xxx missing location data
[Scheduler] Session xxx not connected (user not found)
โ Failed to send to +201234567890
```

### 3๏ธโฃ ุงุฎุชุจุงุฑ ูุฏูู

ูู ููุญุฉ ุงููุนูููุงุช:
1. ุงุถุบุท ุนูู "ุงุฎุชุจุงุฑ ุงูุฅุฎุทุงุฑุงุช" (Test Notifications)
2. ุงุฎุชุจุฑ ุงููุณุชูุจููู ุงููุฑุฏููู ูุงููุฌููุนุงุช
3. ุชุญูู ูู ูุตูู ุงูุฑุณุงุฆู

---

## ๐ ูุญูุตุงุช ุณุฑูุนุฉ

### โ ูุงุฆูุฉ ุงูุชุญูู ุงูุฃุณุงุณูุฉ

- [ ] ุฌูุณุฉ WhatsApp ูุฑุชุจุทุฉ ูููุถุญุฉ ุจู โ
- [ ] ุงููููุน ูุงูุฅุญุฏุงุซูุงุช ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ
- [ ] ุตูุงุฉ ุงููุฌุฑ (ุฃู ุงูุตููุงุช ุงููุทููุจุฉ) ููุนููุฉ
- [ ] ููุช ุงูุชูุจูู ูุญุฏุฏ (ูุซูุงู 10 ุฏูุงุฆู ูุจู ุงูุฃุฐุงู)
- [ ] ูุชููู ูุงุญุฏ ุนูู ุงูุฃูู ูุถุงู ูููุนูู
- [ ] ุงูุฎุงุฏู ูุนูู ุจุดูู ูุณุชูุฑ
- [ ] ุงูููุทูุฉ ุงูุฒูููุฉ ุตุญูุญุฉ

### โ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

```javascript
// ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุฅุฎุทุงุฑุงุช ูู Dashboard
// ุฃู ุงุณุชุฎุฏุงู:
curl -X POST http://localhost:3001/api/islamic-reminders/test-notification \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

---

## ๐ ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุดุงุฆุนุฉ ูุญููููุง

| ุงูุฎุทุฃ | ุงูุณุจุจ | ุงูุญู |
|------|------|------|
| `Session not found` | ุงูุฌูุณุฉ ุบูุฑ ููุฌูุฏุฉ ุฃู ูููุทุนุฉ | ุฃุนุฏ ุฑุจุท ุฌูุณุฉ WhatsApp |
| `Session not connected` | ุฌูุณุฉ ููุฌูุฏุฉ ููู ุบูุฑ ูุชุตูุฉ | ุชุญูู ูู ุงุชุตุงู WhatsApp |
| `Missing location data` | ูู ุชุญุฏุฏ ุงููููุน | ุฃุฏุฎู ุจูุงูุงุช ุงููููุน ูุงูุฅุญุฏุงุซูุงุช |
| `No recipients found` | ูู ุชุถู ูุชูุจููู | ุฃุถู ุฃุฑูุงู WhatsApp ุฃู ูุฌููุนุงุช |
| `No prayer settings enabled` | ูู ุชูุนูู ุฃู ุตูุงุฉ | ูุนูู ุงูุตููุงุช ุงููุทููุจุฉ |
| `Failed to calculate prayer times` | ูุดููุฉ ูู ุญุณุงุจ ุงูููุช | ุชุญูู ูู ุงูุฅุญุฏุงุซูุงุช ูุงูููุทูุฉ ุงูุฒูููุฉ |

---

## ๐ ูุตุงุฆุญ ููุฃุฏุงุก ุงูุฃูุซู

1. **ุงุณุชุฎุฏู ุชูููุช ููุงุณุจ ููุชูุจููุงุช**
   - ูุง ุชุฎุชุฑ ููุชุงู ูุฑูุจุงู ุฌุฏุงู ูู ุงูุฃุฐุงู
   - 10-15 ุฏูููุฉ ูุจู ุงูุฃุฐุงู ูุซุงููุฉ

2. **ุชุฌูุจ ุฅุฑุณุงู ุฑุณุงุฆู ูุชุนุฏุฏุฉ ูู ููุณ ุงูููุช**
   - ุงููุธุงู ูุฑุณู ุจุฑุณุงูุฉ ูุงุญุฏุฉ ูู ุซุงููุฉ ุชููุงุฆูุงู
   - ูุฐุง ูููุน ุงูุญุฌุจ ูู WhatsApp

3. **ุงุณุชุฎุฏู ูุฌููุนุงุช WhatsApp ููุฅุฑุณุงู ุงูุฌูุงุนู**
   - ุฃุณุฑุน ูุฃูุซุฑ ููุงุกุฉ ูู ุฅุฑุณุงู ุฑุณุงุฆู ูุฑุฏูุฉ ูุชุนุฏุฏุฉ

4. **ุญุฏูุซ ุจูุงูุงุช ุงููููุน ุจุดูู ุฏูุฑู**
   - ุฃููุงุช ุงูุตูุงุฉ ุชุชุบูุฑ ููููุงู
   - ุชุฃูุฏ ูู ุชุญุฏูุซ ุงููููุน ุงูุตุญูุญ

---

## ๐ ุงููุณุงุนุฏุฉ ุงูุฅุถุงููุฉ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู:
1. ุชุญูู ูู ุณุฌูุงุช ุงูุฎุงุฏู (Server Logs)
2. ุงุณุชุฎุฏู ุฃุฏุงุฉ ุงูุชุดุฎูุต: `node tools/diagnose_reminders.js`
3. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ
4. ุชูุงุตู ูุน ุงูุฏุนู ุงูููู ูุน ุฑูู ุงูุชูุฑูุฑ ุงููุงูู

---

## ๐ ุขุฎุฑ ุชุญุฏูุซ

ุขุฎุฑ ุชุนุฏูู: ุงูุฅุตูุงุญุงุช ุงูุดุงููุฉ ููุฌุฏููุฉ ูุงูุฅุฑุณุงู
- ุชุญุณูู ุงูุชุญูู ูู ุงูุฌูุณุงุช ุงููุชุตูุฉ
- ุฅุถุงูุฉ ุฑุณุงุฆู ุฎุทุฃ ุชูุตูููุฉ
- ุชุญุณูู ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุญุฏูุฉ
